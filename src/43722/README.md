# 43722 - 螺旋矩阵

![Year: 2020](https://img.shields.io/badge/Year-2020-white)
![Level: Provincial Mock](https://img.shields.io/badge/Level-Provincial%20Mock-blue)
![Python3](https://img.shields.io/badge/Python3-AC-green)

## 题目

### 问题描述

对于一个 $n$ 行 $m$ 列的表格，我们可以使用螺旋的方式给表格依次填上正整数，我们称填好的表格为一个螺旋矩阵。

例如，一个 4 行 5 列的螺旋矩阵如下：

```txt
1 2 3 4 5

14 15 16 17 6

13 20 19 18 7

12 11 10 9 8
```

### 输入描述

输入的第一行包含两个整数 $n, m$，分别表示螺旋矩阵的行数和列数。

第二行包含两个整数 $r, c$，表示要求的行号和列号。

其中，$2 \leq n, m \leq 1000，1 \leq r \leq n，1 \leq c \leq m$。

### 输出描述

输出一个整数，表示螺旋矩阵中第 $r$ 行第 $c$ 列的元素的值。

### 输入输出样例

#### 示例

> 输入

```txt
4 5
2 2
```

> 输出

```txt
15
```

## 分析

此题可以直接采用**构造法**解决，即按照顺序依次构造矩阵元素。最坏情况的元素值是 $1000 \times 1000$，在可接受的范围内。需要注意，构造时，并不需要维护完整的矩阵，而只需要维护各边界的位置（顶端、底端、左端、右端）。

### 优化

如果题目的数据范围变得更大，就无法使用构造法进行模拟了。我们可以尝试发现螺旋矩阵存在的某些规律，然后用性能更好的**计算法**来求解。

不难发现，我们可以将所求的元素值视为“完整的外壳累加和”与“不完整的内核累加和”的和。如下所示，`o` 表示“外壳”，`x` 表示“内核”。

```txt
o o o o o o o o o
o o o o o o o o o
o o x x x x x o o
o o         x o o
o o         x o o
o o           o o
o o           o o
o o o o o o o o o
o o o o o o o o o
```

假设所求的元素位于第 $k$ 层之外，那么各个元素的 $k$ 值如下所示：

```txt
0 0 0 0 0 0 0 0 0
0 1 1 1 1 1 1 1 0
0 1 2 2 2 2 2 1 0
0 1 2 3 3 3 2 1 0
0 1 2 3 4 3 2 1 0
0 1 2 3 3 3 2 1 0
0 1 2 2 2 2 2 1 0
0 1 1 1 1 1 1 1 0
0 0 0 0 0 0 0 0 0
```

每增加完整的一层，外壳的长度和宽度就会减小 $2$。根据这个规律进行递推求和，可以计算从 $1$ 到 $k$ 层的所有“外壳”的累加和。

然后，根据元素位于“内核”的哪一条边，计算“内核”累加和。

最后，将“外壳”和“内核”的累加和进行相加，即可得到最终结果。

> 补充一个大数值测试用例：
> 
> ```txt
> 1000 1000
> 555 555
> ```
> 
> 答案是 `988119`。
