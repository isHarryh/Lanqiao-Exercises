# 43697 - 机器人塔

![Year: 2016](https://img.shields.io/badge/Year-2016-white)
![Level: National](https://img.shields.io/badge/Level-National-purple)
![Python3](https://img.shields.io/badge/Python3-AC-green)

## 题目

### 题目描述

X 星球的机器人表演拉拉队有两种服装， $A$ 和 $B$ 。

他们这次表演的是搭机器人塔。

类似：

```math
\begin{matrix}
A \\
BB \\
ABA \\
AABB \\
BBBAB \\
ABABBA \\
\end{matrix}
```

队内的组塔规则是：

$A$ 只能站在 $AA$ 或 $BB$ 的肩上。

$B$ 只能站在 $AB$ 或 $BA$ 的肩上。

你的任务是帮助拉拉队计算一下，在给定 $A$ 与 $B$ 的人数时，可以组成多少种花样的塔。

### 输入描述

输入一行两个整数 $M, N$ （ $0<M, N<500$ ），分别表示 $A, B$ 的人数，保证人数合理性。

### 输出描述

要求输出一个整数，表示可以产生的花样种数。

### 输入输出样例

#### 示例

> 输入

```txt
1 2
```

> 输出

```txt
3
```

## 分析

本题涉及**位运算**，具体而言是按位**异或**运算（`^`），底下机器人异或结果是 `0` 时，应该站 $A$ 机器人，否则站 $B$ 机器人。

用**枚举法**解决本题有两种方向，一种是从塔尖开始生成塔，另一种是由塔底开始生成塔。由于每一个确定的塔底所生成的塔是唯一的，因此选择第二种方向最简单。

根据异或的特性，设 $A=0, B=1$ ，那么塔的每一层都可以使用一个二进制数来表示，且这个二进制数的位数（机器人数）等于所在层数。

解决本题的算法逻辑如下：

1. 先利用等差数列求和公式，计算出总层数 $n$ 。
2. 然后枚举第 $n$ 层（塔底）的 $2^n$ 种情况。对于每一种塔底，逐层向上进行推算。假设某一层的二进制数值是 $V_i$ ，它的上一层是 $V_{i-1}$ ，那么有递推关系： $V_{i-1} = (((V_i \ll 1) \text{XOR} V_i) \gg 1) \text{AND} \neg(1 \ll i)$ 。其中 $(V_i \ll 2) \text{XOR} V_i$ 指的是该层对自身进行交错式的异或运算，其余的运算则是为了抹除异或之后的头尾冗余数位。
3. 最后统计 $A$ 和 $B$ 的出现次数是否等于输入值（其实在上一步中也可以提前判断出现次数是否已经超过输入值）。
