# 43742 - 大胖子走迷宫

![Year: 2019](https://img.shields.io/badge/Year-2019-white)
![Level: National](https://img.shields.io/badge/Level-National-purple)
![Python3](https://img.shields.io/badge/Python3-AC-green)

## 题目

### 题目描述

小明是个大胖子，或者说是个大大胖子，如果说正常人占用 $1 \times 1$ 的面积，小明要占用 $5\times 5$ 的面积。

由于小明太胖了，所以他行动起来很不方便。当玩一些游戏时，小明相比小伙伴就吃亏很多。

小明的朋友们制定了一个计划，帮助小明减肥。计划的主要内容是带小明玩一些游戏，让小明在游戏中运动消耗脂肪。走迷宫是计划中的重要环节。

朋友们设计了一个迷宫，迷宫可以看成是一个由 $n \times n$ 个方阵组成的方阵，正常人每次占用方阵中 $1 \times 1$ 的区域，而小明要占用 $5 \times 5$ 的区域。小明的位置定义为小明最正中的一个方格。迷宫四周都有障碍物。

为了方便小明，朋友们把迷宫的起点设置在了第 $3$ 行第 $3$ 列，终点设置在了第 $n−2$ 行第 $n−2$ 列。

小明在时刻 $0$ 出发，每单位时间可以向当前位置的上、下、左、右移动单 位 1 的距离，也可以停留在原地不动。小明走迷宫走得很辛苦，如果他在迷宫里面待的时间很长，则由于消耗了很多脂肪，他会在时刻 $k$ 变成一个胖子，只占用 $3 \times 3$ 的区域。如果待的时间更长，他会在时刻 $2k$ 变成一个正常人，只占用 $1 \times 1$ 的区域。注意，当小明变瘦时迷宫的起点和终点不变。

请问，小明最少多长时间能走到迷宫的终点。注意，小明走到终点时可能瘦了也可能没有变瘦。

### 输入描述

输入的第一行包含两个整数 $n,k\ （1 \leq n \leq 300，1 \leq k \leq 1000） $ 。

接下来 $n$ 行，每行一个由 $n$ 个字符组成的字符串，字符为 + 表示为空地，字符为 \* 表示为阻碍物。

### 输出描述

输出一个整数，表示答案。

### 输入输出样例

#### 示例

> 输入

```txt
9 5
+++++++++
+++++++++
+++++++++
+++++++++
+++++++++
***+*****
+++++++++
+++++++++
+++++++++
```

> 输出

```txt
16
```

## 分析

本题是**最短路径搜索**的变种，尤其适合 BFS 算法。

在进行常规 BFS 搜索时，如果遇到“当前暂时无法通行的地块”，就将此地块再次加入到“待搜索地块的队列”中，等待下一轮搜索（步数加一）。此谓之，原地踏步。

题目输入的是 1x1 尺寸的通行障碍矩阵（符号 * 表示不能通行），我们暂时命名为 `block_1x1`。为了快速地知道“当前地块是否能够通行”，我们可以根据 `block_1x1` 预先计算出 3x3 尺寸的通行障碍矩阵 `block_3x3`，以及 5x5 尺寸的通行障碍矩阵 `block_5x5`。在搜索过程中，只需根据 $k$ 与当前步数的关系，妥善选取合适的障碍矩阵进行搜索即可。
