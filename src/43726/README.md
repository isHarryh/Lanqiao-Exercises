# 43726 - 练功

![Year: 2020](https://img.shields.io/badge/Year-2020-white)
![Level: Provincial Mock](https://img.shields.io/badge/Level-Provincial%20Mock-blue)
![Python3](https://img.shields.io/badge/Python3-AC-green)

## 题目

### 题目描述

小明每天都要练功，练功中的重要一项是梅花桩。小明练功的梅花桩排列成 $n$ 行 $m$ 列，相邻两行的距离为 1，相邻两列的距离也为 1。

小明站在第 1 行第 1 列上，他要走到第 $n$ 行第 $m$ 列上。小明已经练了一段时间，他现在可以一步移动不超过 $d$ 的距离（直线距离）。

小明想知道，在不掉下梅花桩的情况下，自己最少要多少步可以移动到目标。

### 输入描述

输入格式：

输入的第一行包含两个整数 $n, m$ ，分别表示梅花桩的行数和列数。

第二行包含一个实数 $d$ （最多包含一位小数），表示小明一步可以移动的距离。

其中， $2 \leq n, m \leq 1000$ ， $1 \leq d \leq 100$ 。

### 输出描述

输出一个整数，表示小明最少多少步可以到达目标。

### 输入输出样例

#### 示例

> 输入

```txt
3 4
1.5
```

> 输出

```txt
3
```

## 分析

本题可以按照一定的规则进行**搜索**，或者说，实时决策。

假设可行进的点不限于整数点，那么最优的办法是沿着对角线直接走到终点。每走一步，都会落在一个由四个整数点围成的方形区域（含边界和顶点）里面。当添加了“整数”这一限制，我们就需要在上述的四个整数点中，选择一个点作为落点。

总的策略如下（为了方便起见，统一将横纵坐标减去 $1$ 使得坐标值从 $0$ 开始）：

1. 计算当前位置 $O(0, 0)$ 到终点 $(m, n)$ 的距离，如果已经小于 $d$ ，那么直接跳到终点。
2. 假设没有“整数”的限制，沿着对角线行进一步，落点为 $T$ 。连接线段 $OT$ ，计算 $OT$ 在横纵坐标轴的投影长度，分别记作 $x$ 和 $y$ 。
3. 如果 $\text{hypot}(\lceil x \rceil, \lceil y \rceil) \le d$ ，直接跳到 $(\lceil x \rceil, \lceil y \rceil)$ 点。否则根据 $\text{hypot}(\lfloor x \rfloor, \lceil y \rceil)$ 和 $\text{hypot}(\lceil x \rceil, \lfloor y \rfloor)$ 分别与 $d$ 的大小关系，判断是否可以跳到 $(\lfloor x \rfloor, \lceil y \rceil)$ 或 $(\lceil x \rceil, \lfloor y \rfloor)$ 点（如果都可以跳到，则根据 $m,n$ 的大小关系进一步选取最优者）。如果上述的点都不可行，则只能跳到 $(\lfloor x \rfloor, \lfloor y \rfloor)$ 点。
4. 假设本次跳到了 $(x', y')$ 点，则更新终点坐标为 $(m-x', n-y')$ ，起点坐标保持为 $(0, 0)$ 不变，继续下一轮循环。
